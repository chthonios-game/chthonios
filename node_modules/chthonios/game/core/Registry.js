var Common = require("chthonios/rt/Common");
var Environment = Common.Environment.load({});

/**
 * @class
 */
var Registry = Environment.Class.extend(
/** @lends Registry.prototype */
{
	/**
	 * List of entity types.
	 * 
	 * @type Object
	 */
	_entities : null,
	/**
	 * List of item types.
	 * 
	 * @type Object
	 */
	_items : null,

	/**
	 * Initializes the stream wrapper.
	 */
	init : function() {
		this._entities = {};
		this._items = [];
	},

	registerEntity : function(name, klass) {
		assert(name !== null, "name not provided");
		assert(klass !== null, "class not provided");
		assert(this._entities[name] === undefined || this._entities[name] === null, "entity already defined");
		this._entities[name] = klass;
		return name;
	},

	registerItem : function(id, klass) {
		assert(id !== null, "id not provided");
		id = parseInt(id);
		assert(id !== null && id !== NaN, "id not a number");
		assert(id >= 0, "id out of range");
		assert(this._items[id] === undefined || this._items[id] === null, "item already defined");
		this._items[id] = klass;
		return id;
	},

}, "Registry");

module.exports = {
	/** @type Function */
	Registry : Registry
}